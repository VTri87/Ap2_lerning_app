/* ── Reset ────────────────────────────────────────────────────────── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

/* ── Variables ────────────────────────────────────────────────────── */
:root{
  --bg:#0d1117;
  --bg2:#161b27;
  --bg3:#1c2333;
  --border:#2a3248;
  --accent:#4f8ef7;
  --accent2:#7c5bf6;
  --accent-dim:#162044;
  --text:#e2e8f0;
  --dim:#8896b3;
  --muted:#4a5568;
  --green:#34d399;
  --red:#f87171;
  --sw:270px;
  --r:10px;
  --shadow:0 8px 32px rgba(0,0,0,.5);
}

html,body{height:100%;font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);font-size:15px;line-height:1.6}
body{display:flex;height:100vh;overflow:hidden}

/* ── Sidebar ──────────────────────────────────────────────────────── */
.sidebar{
  width:var(--sw);min-width:var(--sw);
  background:var(--bg2);border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  transition:transform .25s ease;
}
.sidebar.collapsed{transform:translateX(calc(-1 * var(--sw)));position:absolute;z-index:100;height:100%}

.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:18px 16px 14px;border-bottom:1px solid var(--border)}
.logo{font-size:20px;font-weight:800;letter-spacing:-.5px}
.logo span{color:var(--accent)}

.icon-btn,.sidebar-open-btn{background:none;border:1px solid var(--border);color:var(--dim);cursor:pointer;border-radius:7px;padding:5px 10px;font-size:16px;transition:all .15s}
.icon-btn:hover,.sidebar-open-btn:hover{background:var(--bg3);color:var(--text)}

.sidebar-open-btn{position:fixed;top:14px;left:14px;z-index:99;background:var(--bg2);box-shadow:var(--shadow)}
.sidebar-open-btn.hidden{display:none}

/* ── Search ───────────────────────────────────────────────────────── */
.search-wrap{padding:10px 12px 8px;position:relative}
.search-wrap input{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:8px 12px;font-size:13px;outline:none;transition:border-color .15s}
.search-wrap input:focus{border-color:var(--accent)}
.search-wrap input::placeholder{color:var(--muted)}

.search-dropdown{position:absolute;left:12px;right:12px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;z-index:200;max-height:260px;overflow-y:auto;box-shadow:var(--shadow)}
.search-dropdown.hidden{display:none}

.sd-item{padding:10px 14px;border-bottom:1px solid var(--border);cursor:pointer;transition:background .12s}
.sd-item:last-child{border-bottom:none}
.sd-item:hover{background:var(--accent-dim)}
.sd-exam{font-size:10px;color:var(--accent);font-weight:700;text-transform:uppercase;letter-spacing:.4px}
.sd-task{font-size:12px;color:var(--dim);margin:2px 0}
.sd-snippet{font-size:12px;color:var(--text)}
.sd-snippet mark,.search-mark{background:rgba(79,142,247,.2);color:var(--accent);border-radius:2px;padding:0 2px}

/* ── Sidebar nav ──────────────────────────────────────────────────── */
.sidebar-nav{flex:1;overflow-y:auto;padding:6px 0}
.sidebar-nav::-webkit-scrollbar{width:3px}
.sidebar-nav::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}

.nav-group{margin-bottom:4px}
.nav-group-label{padding:10px 16px 5px;font-size:10px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.8px}
.nav-item{display:flex;align-items:center;gap:8px;padding:8px 16px;cursor:pointer;font-size:13px;color:var(--dim);transition:background .1s,color .1s}
.nav-item:hover{background:var(--bg3);color:var(--text)}
.nav-item.active{background:var(--accent-dim);color:var(--accent);font-weight:600}
.nav-placeholder{padding:16px;color:var(--muted);font-size:13px}

.sidebar-foot{padding:10px 12px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:8px}
.btn-settings{width:100%;background:var(--bg3);border:1px solid var(--border);color:var(--dim);padding:9px;border-radius:8px;cursor:pointer;font-size:13px;transition:all .15s}
.btn-settings:hover{border-color:var(--accent);color:var(--accent)}
.btn-settings.active{border-color:var(--green);color:var(--green)}
.sb-ki{display:flex;align-items:center;gap:10px;padding:9px 10px;border-radius:8px;cursor:pointer;border:1px solid var(--border);background:var(--bg3);transition:all .15s}
.sb-ki:hover{border-color:var(--accent2);background:rgba(124,91,246,.08)}
.sb-ki-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;background:var(--muted);transition:background .2s}
.sb-ki-dot.active{background:var(--green);box-shadow:0 0 6px var(--green)}
.sb-ki-info{flex:1;min-width:0}
.sb-ki-label{font-size:12px;font-weight:700;color:var(--text)}
.sb-ki-status{font-size:11px;color:var(--dim);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sb-ki-arrow{font-size:16px;color:var(--muted);flex-shrink:0}

/* ── Main ─────────────────────────────────────────────────────────── */
.main{flex:1;overflow-y:auto;padding:32px 44px 140px;position:relative}
.main::-webkit-scrollbar{width:5px}
.main::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}

/* ── Views ────────────────────────────────────────────────────────── */
.view{animation:fadeIn .18s ease}
.view.hidden{display:none!important}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* ── Hero ─────────────────────────────────────────────────────────── */
.hero{text-align:center;padding:40px 0 36px}
.hero-badge{display:inline-block;background:var(--accent-dim);border:1px solid var(--accent);color:var(--accent);border-radius:20px;padding:4px 14px;font-size:12px;font-weight:700;letter-spacing:.5px;margin-bottom:16px}
.hero h1{font-size:36px;font-weight:800;line-height:1.2;background:linear-gradient(135deg,#e2e8f0,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:10px}
.hero-sub{color:var(--dim);font-size:16px}

/* ── Stats ────────────────────────────────────────────────────────── */
.stats-row{display:flex;gap:14px;justify-content:center;margin:28px 0 40px;flex-wrap:wrap}
.stat{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:18px 24px;text-align:center;min-width:120px}
.stat-num{font-size:30px;font-weight:800;color:var(--accent);line-height:1}
.stat-lbl{font-size:11px;color:var(--dim);text-transform:uppercase;letter-spacing:.5px;margin-top:4px}

/* ── Section label ────────────────────────────────────────────────── */
.section-label{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.6px;color:var(--muted);margin-bottom:16px}

/* ── Topic grid ───────────────────────────────────────────────────── */
.topic-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
.topic-card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:16px 18px;cursor:pointer;transition:all .15s;display:flex;align-items:flex-start;gap:12px}
.topic-card:hover{border-color:var(--accent);background:var(--accent-dim);transform:translateY(-1px)}
.tc-icon{font-size:22px;line-height:1}
.tc-name{font-weight:600;font-size:14px;margin-bottom:2px}
.tc-count{font-size:12px;color:var(--muted)}

/* ── Exam grid ────────────────────────────────────────────────────── */
.exam-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
.exam-card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:18px 20px;cursor:pointer;transition:all .15s}
.exam-card:hover{border-color:var(--accent);transform:translateY(-1px)}
.ec-year{font-size:20px;font-weight:800;color:var(--accent)}
.ec-season{font-size:13px;color:var(--dim);margin:2px 0 8px}
.ec-info{font-size:12px;color:var(--muted)}

/* ── Back btn / chips ─────────────────────────────────────────────── */
.back-btn{display:inline-flex;align-items:center;gap:6px;background:none;border:none;color:var(--muted);font-size:13px;cursor:pointer;margin-bottom:16px;padding:4px 0;transition:color .15s}
.back-btn:hover{color:var(--accent)}

.chip{background:var(--bg3);border:1px solid var(--border);border-radius:20px;padding:3px 12px;font-size:12px;color:var(--dim)}

.exam-meta-bar{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:24px}

.btn-accent{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:7px 16px;border-radius:8px;cursor:pointer;font-size:13px;font-weight:600;transition:opacity .15s}
.btn-accent:hover{opacity:.85}

/* ── Task cards ───────────────────────────────────────────────────── */
#taskList,#topicTaskList{display:flex;flex-direction:column;gap:16px}

.task-card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.task-card:hover{border-color:#374060}

.task-head{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;cursor:pointer;user-select:none;background:var(--bg3);transition:background .12s}
.task-head:hover{background:#1e2840}
.task-card.open .task-head{border-bottom:1px solid var(--border)}

.task-title{font-size:15px;font-weight:700}
.task-meta{display:flex;align-items:center;gap:10px}
.pts{background:var(--accent-dim);border:1px solid var(--accent);color:var(--accent);border-radius:12px;padding:2px 10px;font-size:11px;font-weight:700}
.toggle-arrow{color:var(--muted);font-size:13px;transition:transform .2s}
.task-card.open .toggle-arrow{transform:rotate(180deg)}

.task-body{display:none;padding:20px}
.task-card.open .task-body{display:block}

.exam-ref{font-size:11px;color:var(--accent);font-weight:700;text-transform:uppercase;letter-spacing:.4px;margin-bottom:8px}

.task-tags{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.tag{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2px 10px;font-size:11px;color:var(--muted)}

/* task-text is now structured HTML, not raw pre-wrap */
.task-text{font-size:14px;line-height:1.75;color:var(--text);max-width:820px}

/* Normal paragraph */
.tq-para{margin:0 0 10px;color:var(--text)}

/* Main sub-question: a) b) c) */
.tq-main{
  display:flex;align-items:baseline;gap:10px;
  margin:18px 0 6px;
  padding:10px 14px;
  background:var(--accent-dim);
  border-left:3px solid var(--accent);
  border-radius:0 var(--r) var(--r) 0;
}
.tq-label{
  font-weight:800;font-size:16px;color:var(--accent);
  flex-shrink:0;min-width:24px;
}
.tq-text{color:var(--text);font-weight:500}

/* Sub-sub-question: aa) ab) ba) */
.tq-sub{
  display:flex;align-items:baseline;gap:8px;flex-wrap:wrap;
  margin:10px 0 4px 20px;
  padding:8px 12px;
  background:var(--bg3);
  border-left:2px solid var(--border);
  border-radius:0 8px 8px 0;
}
.tq-sub-label{font-weight:700;font-size:13px;color:var(--dim);flex-shrink:0;min-width:28px}
.tq-sub-text{color:var(--text);flex:1}

/* Points badge */
.tq-pts{
  background:rgba(79,142,247,.15);
  border:1px solid var(--accent);
  color:var(--accent);
  border-radius:10px;
  padding:1px 8px;
  font-size:11px;font-weight:700;
  white-space:nowrap;flex-shrink:0;
}
.tq-pts-line{margin:4px 0 4px 20px}

/* Bullet list */
.task-bullets{
  margin:6px 0 10px 20px;
  padding-left:16px;
  list-style:none;
}
.task-bullets li{
  position:relative;padding-left:14px;
  margin-bottom:5px;color:var(--text);font-size:14px;
}
.task-bullets li::before{
  content:'›';
  position:absolute;left:0;
  color:var(--accent);font-weight:700;
}

/* Section header: "Ablauf:", "Variante 1:" */
.tq-section{
  font-weight:700;font-size:13px;color:var(--dim);
  text-transform:uppercase;letter-spacing:.4px;
  margin:14px 0 6px;
  padding-bottom:4px;
  border-bottom:1px solid var(--border);
}

/* DB table rendering */
.db-table-wrap{
  margin:12px 0;
  border:1px solid var(--border);
  border-radius:8px;
  overflow:hidden;
  background:var(--bg2);
}
.db-table-name{
  background:var(--bg3);
  color:var(--accent);
  font-weight:700;font-size:11px;
  padding:5px 12px;
  letter-spacing:.05em;
  text-transform:uppercase;
  border-bottom:1px solid var(--border);
}
.db-table-scroll{
  overflow-x:auto;
  max-width:100%;
}
.db-table{
  border-collapse:collapse;
  width:max-content;
  min-width:100%;
  font-size:12px;
}
.db-table thead{background:var(--bg3)}
.db-table th{
  padding:6px 12px;
  text-align:left;
  color:var(--accent2);
  font-family:monospace;
  font-size:11px;
  border-bottom:2px solid var(--border);
  white-space:nowrap;
}
.db-table td{
  padding:5px 12px;
  border-bottom:1px solid var(--border);
  color:var(--text);
  white-space:nowrap;
  font-size:12px;
}
.db-table tbody tr:last-child td{border-bottom:none}
.db-table tbody tr:nth-child(even){background:rgba(255,255,255,.025)}
.db-table tbody tr:hover{background:var(--accent-dim)}
.db-table-more{
  padding:4px 12px;
  font-size:11px;color:var(--muted);
  border-top:1px solid var(--border);
  font-style:italic;
}

/* SQL keywords inline */
code.sql-kw{
  background:rgba(124,91,246,.15);
  color:#a78bfa;
  border-radius:3px;padding:1px 4px;
  font-size:12px;font-family:monospace;
}

.task-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
.btn-task{background:var(--bg3);border:1px solid var(--border);color:var(--dim);padding:7px 14px;border-radius:8px;cursor:pointer;font-size:13px;transition:all .15s}
.btn-task:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-dim)}

/* ── Answer panel (Lösung einreichen & prüfen) ───────────────────── */
.answer-panel{margin-top:16px;border-top:1px solid var(--border);padding-top:16px}
.answer-panel.hidden{display:none}
.ap-header{font-size:13px;font-weight:700;color:var(--accent2);margin-bottom:10px}
.ap-text{
  width:100%;background:var(--bg3);border:1px solid var(--border);color:var(--text);
  border-radius:8px;padding:10px 12px;font-size:13px;font-family:inherit;
  resize:vertical;min-height:80px;outline:none;transition:border-color .15s;
}
.ap-text:focus{border-color:var(--accent2)}
.ap-img-zone{
  margin-top:10px;border:2px dashed var(--border);border-radius:8px;
  padding:14px;text-align:center;cursor:pointer;transition:all .15s;
}
.ap-img-zone:hover,.ap-img-zone.dragover{border-color:var(--accent2);background:rgba(124,91,246,.05)}
.ap-img-hint{font-size:12px;color:var(--dim);pointer-events:none}
.ap-img-preview{max-width:100%;max-height:200px;border-radius:6px;margin:8px auto;display:block}
.ap-img-clear{
  background:none;border:1px solid var(--border);color:var(--dim);
  cursor:pointer;border-radius:6px;padding:3px 10px;font-size:12px;margin-top:6px;
  transition:all .15s;
}
.ap-img-clear:hover{border-color:var(--red);color:var(--red)}
.ap-actions{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.ap-submit{background:rgba(124,91,246,.15)!important;border-color:var(--accent2)!important;color:var(--accent2)!important}
.ap-submit:hover{background:rgba(124,91,246,.3)!important}
.ap-submit:disabled{opacity:.45;cursor:not-allowed;pointer-events:none}
.ap-feedback{
  margin-top:14px;background:var(--bg3);
  border:1px solid var(--border);border-left:3px solid var(--accent2);
  border-radius:0 8px 8px 0;padding:14px 16px;
  font-size:13px;line-height:1.75;color:var(--text);
}
.ap-feedback.hidden{display:none}
.ap-feedback.streaming::after{content:'▋';animation:blink .7s step-end infinite}
.ap-feedback p.fb-p{margin-bottom:8px}
.fb-ok{color:var(--green);font-weight:700}
.fb-warn{color:#fbbf24;font-weight:700}
.fb-err{color:var(--red);font-weight:700}

/* ── Theory box ───────────────────────────────────────────────────── */
.theory-box{background:var(--bg2);border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:var(--r);padding:20px 24px;font-size:14px;line-height:1.8;color:var(--text)}
.theory-box.loading{color:var(--muted);font-style:italic;white-space:pre-wrap}
.theory-box.streaming{white-space:pre-wrap}
.theory-box.streaming::after{content:'▋';animation:blink .7s step-end infinite}
.btn-explain{background:var(--accent);color:#fff;border:none;border-radius:var(--r);padding:10px 20px;font-size:14px;cursor:pointer;font-weight:600;transition:opacity .2s}
.btn-explain:hover{opacity:.85}
.btn-regenerate{margin-top:16px;background:transparent;color:var(--muted);border:1px solid var(--border);border-radius:var(--r);padding:6px 14px;font-size:12px;cursor:pointer;transition:all .15s}
.btn-regenerate:hover{border-color:var(--accent);color:var(--accent)}
.theory-content{white-space:normal}
.theory-content h3{font-size:15px;font-weight:700;margin:16px 0 6px;color:var(--accent)}
.theory-content h4{font-size:14px;font-weight:700;margin:12px 0 4px;color:var(--text)}
.theory-content p{margin:4px 0}
.theory-content ul,.theory-content ol{margin:6px 0 6px 20px;padding:0}
.theory-content li{margin:2px 0}
.theory-content pre{background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:12px 14px;overflow-x:auto;margin:10px 0}
.theory-content code{font-family:monospace;font-size:13px}
.theory-content .ic{background:var(--bg3);border:1px solid var(--border);border-radius:4px;padding:1px 5px}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* ── Search results ───────────────────────────────────────────────── */
.search-card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:16px 20px;margin-bottom:10px;cursor:pointer;transition:border-color .15s}
.search-card:hover{border-color:var(--accent)}
.sc-exam{font-size:11px;color:var(--accent);font-weight:700;text-transform:uppercase;letter-spacing:.4px;margin-bottom:4px}
.sc-task{font-size:14px;font-weight:600;margin-bottom:6px}
.sc-snippet{font-size:13px;color:var(--dim)}

/* ── Chat ─────────────────────────────────────────────────────────── */
.chat{
  position:fixed;top:0;right:0;
  width:340px;height:100vh;
  background:var(--bg2);
  border-left:1px solid var(--border);
  box-shadow:-8px 0 32px rgba(0,0,0,.5);
  display:flex;flex-direction:column;z-index:500;
  transform:translateX(0);
  transition:transform .28s cubic-bezier(.4,0,.2,1);
}
.chat.minimized{transform:translateX(100%)}

.chat-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 14px;
  background:linear-gradient(135deg,#1a2f6e,#2a1d6e);
  cursor:pointer;user-select:none;
  border-bottom:1px solid rgba(255,255,255,.08);
  flex-shrink:0;
}

.chat-head-info{display:flex;align-items:center;gap:10px;font-size:22px}
.chat-title{font-weight:700;font-size:14px;color:#fff}
.chat-sub{font-size:11px;color:rgba(255,255,255,.5)}

.chat-head-btns{display:flex;gap:6px}
.chat-head-btns button{background:rgba(255,255,255,.12);border:none;color:#fff;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:13px;display:flex;align-items:center;justify-content:center;transition:background .15s}
.chat-head-btns button:hover{background:rgba(255,255,255,.28)}

.chat-body{display:flex;flex-direction:column;flex:1;min-height:0}

.chat-msgs{flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:10px}
.chat-msgs::-webkit-scrollbar{width:3px}
.chat-msgs::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}

.msg{display:flex;flex-direction:column}
.msg.user{align-items:flex-end}
.msg.ai{align-items:flex-start}

.bubble{max-width:90%;padding:10px 14px;border-radius:12px;font-size:13.5px;line-height:1.65;white-space:pre-wrap;word-break:break-word}
.msg.user .bubble{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;border-radius:12px 12px 4px 12px}
.msg.ai .bubble{background:var(--bg3);border:1px solid var(--border);color:var(--text);border-radius:12px 12px 12px 4px}
.msg.ai .bubble.streaming::after{content:'▋';animation:blink .7s step-end infinite}

.quick-btns{padding:0 12px 10px;display:flex;flex-wrap:wrap;gap:6px}
.qbtn{background:var(--bg3);border:1px solid var(--border);color:var(--dim);padding:5px 11px;border-radius:12px;cursor:pointer;font-size:12px;transition:all .15s;white-space:nowrap}
.qbtn:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-dim)}

.chat-input-row{display:flex;gap:8px;padding:10px 12px;border-top:1px solid var(--border);background:var(--bg2);flex-shrink:0}
.chat-input-row textarea{flex:1;background:var(--bg3);border:1px solid var(--border);border-radius:10px;color:var(--text);padding:9px 12px;font-size:13px;font-family:inherit;resize:none;outline:none;transition:border-color .15s;min-height:40px;max-height:110px}
.chat-input-row textarea:focus{border-color:var(--accent)}
.chat-input-row textarea::placeholder{color:var(--muted)}
#chatSend{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;width:40px;height:40px;border-radius:10px;cursor:pointer;font-size:16px;flex-shrink:0;align-self:flex-end;transition:opacity .15s}
#chatSend:hover{opacity:.85}
#chatSend:disabled{opacity:.35;cursor:not-allowed}

/* ── Modal ────────────────────────────────────────────────────────── */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(4px)}
.overlay.hidden{display:none}

.modal{background:var(--bg2);border:1px solid var(--border);border-radius:16px;width:440px;max-width:95vw;box-shadow:var(--shadow)}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid var(--border)}
.modal-head h3{font-size:17px;font-weight:700}
.modal-head button{background:none;border:none;color:var(--dim);font-size:18px;cursor:pointer;padding:4px 8px;border-radius:6px}
.modal-head button:hover{background:var(--bg3)}

.modal-body{padding:22px}
.modal-body label{display:block;font-size:12px;font-weight:700;color:var(--dim);margin-bottom:7px;text-transform:uppercase;letter-spacing:.5px}
.modal-body input{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:10px 14px;font-size:14px;font-family:monospace;outline:none;margin-bottom:10px;transition:border-color .15s}
.modal-body input:focus{border-color:var(--accent)}

.hint{font-size:12px;color:var(--muted);margin-bottom:18px;line-height:1.6}
.hint a{color:var(--accent);text-decoration:none}
.hint a:hover{text-decoration:underline}

.key-status{font-size:13px;margin-bottom:14px;min-height:20px}
.key-status.ok{color:var(--green)}
.key-status.err{color:var(--red)}

.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:10px 22px;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;transition:opacity .15s}
.btn-primary:hover{opacity:.85}

/* ── Responsive ───────────────────────────────────────────────────── */
@media(max-width:768px){
  .sidebar{position:fixed;z-index:100;height:100%}
  .main{padding:16px 16px 140px}
  .chat{width:calc(100vw - 28px);right:14px;bottom:14px}
  .hero h1{font-size:26px}
  .topic-grid{grid-template-columns:1fr 1fr}
}
